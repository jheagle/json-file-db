"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=void 0;var _testFilesystem=require("test-filesystem"),_record=require("./definitions/record"),__awaiter=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}c((n=n.apply(e,t||[])).next())}))};const create=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return __awaiter(void 0,[e,...r],void 0,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function*(){const n=require("js-build-tools/gulp.config"),{writeFile:i,mkdir:o}=require("fs/promises"),s=n.get("databasePath","database/");if("__RECORDS"===e)return null;if((0,_testFilesystem.fileExists)(`${s}${e}.json`))return null;const u=(0,_record.record)({path:e,definition:t,keys:r});return yield i(`${s}${e}.json`,JSON.stringify(u,null,2)),yield o(`${s}${e}`,{recursive:!0}),u}()}))};exports.create=create;