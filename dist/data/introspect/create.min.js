"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=void 0,require("core-js/modules/esnext.async-iterator.map.js"),require("core-js/modules/esnext.iterator.map.js");var _testFilesystem=require("test-filesystem"),_field=require("./definitions/field"),__awaiter=function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function u(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,u)}a((i=i.apply(e,t||[])).next())}))};const create=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return __awaiter(void 0,[e,...r],void 0,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function*(){const r=require("js-build-tools/gulp.config"),{writeFile:i,mkdir:n}=require("fs/promises"),s=r.get("databasePath","database/");if("__RECORDS"===e)return null;if((0,_testFilesystem.fileExists)(`${s}${e}.json`))return null;const o={path:e,definition:t.map(_field.field),entries:[]};return yield i(`${s}${e}.json`,JSON.stringify(o,null,2)),yield n(`${s}${e}`,{recursive:!0})}()}))};exports.create=create;