"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.joinEntity=void 0;var _siFunciona=_interopRequireDefault(require("si-funciona")),_readEntity=require("./readEntity"),_useJoinClause=require("../utilities/useJoinClause");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __awaiter=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function u(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((i=i.apply(e,t||[])).next())}))};const joinEntity=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return __awaiter(void 0,[e,t,...i],void 0,(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return function*(){if(n=yield(0,_readEntity.readEntity)(e,n),!i.length)return n;n=yield(0,_readEntity.readEntity)(t,n);for(const r in n[e]){let o=_siFunciona.default.cloneObject(n);o[e]=[n[e][r]];for(let e of i)o=yield(0,_useJoinClause.useJoinClause)(e,n,o);n[e][r][t]=o[t]}return n}()}))};exports.joinEntity=joinEntity;